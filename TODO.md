Globals are now consistent with one another

Think about whether to make functions of success and failure

Then proceed to make locals consistent with one another and with globals

* Clean up spec files

* Clean up generally

* Write envsub local tests

* Big tidy up

* Write README
